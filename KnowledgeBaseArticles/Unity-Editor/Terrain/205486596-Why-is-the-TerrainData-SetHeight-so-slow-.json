[{"title":"Why is the TerrainData.SetHeight so slow?","authorName":"Megan.","createdDate":"2015-10-09T16:06:36Z","updatedDate":"2017-03-17T02:42:08Z","labels":["TerrainData.SetHeights","ApplyDelayedHeightmapModification","SetHeightDelayedLOD"],"sections":[{"title":"Symptoms","content":["\n<li><span>I want to make our terrain tools run at an interactive speed.</span></li>\n"]},{"title":"Cause","content":["You have implemented some in-house terrain forming tools, but applying any changes to a terrain results in a dramatic drop in performance making them barely usable."]},{"title":"Resolution","content":["When creating you own terrain editing tools, TerrainData.SetHeights is naturally slower. This is because it needs to recalculate all the terrain LOD information, which is done on every call to SetHeights.","A patch was released for 5.2.0a3 where the SetHeightsDelayedLOD API was introduced to improve the speed at which TerrainData.SetHeights recalculates the LOD information.","In this patch release, the Editor uses two internal functions:","\n<li><span>SetHeightDelayedLOD()</span></li>\n<li><span>ApplyDelayedHeightmapModification()</span></li>\n","<span>With SetHeightDelayedLOD(), the LOD calculation can be skipped or delayed while editing, and is triggered once the mouse button is released.</span>","<span>In interactive editing scenarios, it is advised to call <a href=\"http://docs.unity3d.com/ScriptReference/TerrainData.SetHeightsDelayLOD.html\">TerrainData.SetHeightsDelayLOD</a> instead, followed by <a href=\"http://docs.unity3d.com/ScriptReference/Terrain.ApplyDelayedHeightmapModification.html\">Terrain.ApplyDelayedHeightmapModification</a> when the user completes an editing action.</span>"]},{"title":"More Information","content":["<span>For more information on TerrainData.SetHeights see this document </span><span><a href=\"http://docs.unity3d.com/ScriptReference/TerrainData.SetHeights.html\">here</a>.</span>","<span>Go </span><a href=\"https://unity3d.com/unity/qa/patch-releases?version=5.2\"><span>here</span></a><span> to download the relevant patch where this SetHeightsDelayedLOD API has been implemented.</span>"]}]}]