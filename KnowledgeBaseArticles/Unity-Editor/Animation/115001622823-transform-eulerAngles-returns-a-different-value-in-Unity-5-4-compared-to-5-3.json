[{"title":"transform.eulerAngles returns a different value in Unity 5.4 compared to 5.3","authorName":"Peter Nicholson.","createdDate":"2017-03-31T09:23:23Z","updatedDate":"2017-04-19T06:58:42Z","labels":["Animation","bones","joints","Rig","character"],"sections":[{"title":"Symptoms","content":["\n<li>I have two identical character rigs in my scene. I multiply the <em>Transform.localScale.X</em> by -1 for characters that appear on the right side of the screen and leave the other with a positive scale. This is to make sure rotating them 180 degrees does not make them face the opposite side of the camera. When I examine <em>transform.eulerAngles </em>though, what I see in Unity 5.4 is different to what is reported in Unity 5.3.</li>\n"]},{"title":"Cause","content":["There were multiple fixes that went into the transformation systems in Unity between Unity 5.3 and Unity 5.4. This has caused some issues for people migrating between versions who built on top of the broken functionality present in Unity 5.3. One example of this was the incorrect rotation behaviour when an object was parented to a GameObject with a negative scale. When the Child object (the cube in the gif below) was then rotated using the global rotation, it would rotate in the reverse of the rotation (this has since been fixed in Unity 5.4 and newer versions):","&#xA0;<img src=\"/hc/article_attachments/115005124046/Rotate5.3.gif\" alt=\"Rotate5.3.gif\" width=\"464\" height=\"288\">","Unity 5.3 also reports the&#xA0;<em>Transform.rotation</em> without taking into account the negative scale of the parent. This makes the <em>Transform.rotation</em> appear to be the same as if there was no negative scale in&#xA0;the parent&#xA0;(see picture below). In Unity 5.4 (and newer versions), an object&apos;s&#xA0;<em>Transform.rotation </em>takes into account any negative scaling of itself and its parents. Due to this, you will see different results when using&#xA0;<em>t</em><em>ransform.eulerAngles </em>in 5.3 vs 5.4 and above.","<img src=\"/hc/article_attachments/115005125386/Rotations.jpg\" alt=\"Rotations.jpg\" width=\"471\" height=\"188\">","&#xA0;"]},{"title":"Resolution","content":["If you wish to still reproduce the same Unity 5.3 results that were found from calling&#xA0;<em>transform.eulerAngles</em>, inside Unity 5.4 and above, you can use the attached scripts on this article. These will:","\n<li><strong>RotationFix.cs</strong><span>&#xA0;updates the <em>m_LocalEulerAnglesHint</em> where needed and that results in the correct rotation values being displayed in the editor inspector.</span></li>\n<li><strong>RotationTools.cs</strong><span> contains a static function that should be used where <em>eulerAngles</em> are required to match the 5.3 values. So where you would get the eulerAngles before like <em>transform.eulerAngles</em> you would now call <em>RotationTools.GetRotationWith53Behaviour(transform).eulerAngles.</em></span></li>\n"]},{"title":"More information","content":["This article applies to Unity version 5.4 and above.","<br><br>"]}]}]