[{"title":"How can I set Animation Curve Interpolation via Scripting?","authorName":"Esteban.","createdDate":"2015-12-29T14:35:50Z","updatedDate":"2017-05-09T07:09:03Z","labels":["Scripting","Animation Interpolation"],"sections":[{"title":"Symptoms","content":["\n<li>I need to set Animation Curve Interpolation via Scripting</li>\n"]},{"title":"Cause","content":["You are trying to set animation curves by script and when interpolation is done you get the following result:&#xA0;","<img src=\"/hc/en-us/article_attachments/202514423/FinalPlsDon.png\" alt=\"\" width=\"582\" height=\"167\">"]},{"title":"Resolution","content":["To solve this issue do the following two things:","\n<li>Call <a href=\"http://docs.unity3d.com/ScriptReference/AnimationClip.EnsureQuaternionContinuity.html\">AnimationClip.EnsureQuaternionContinuity</a>&#xA0;after you have manually set via script the Animation Curve properties.</li>\n<li>Save the assets with&#xA0;<a href=\"http://docs.unity3d.com/ScriptReference/AssetDatabase.SaveAssets.html\">AssetDatabase.SaveAssets</a></li>\n","Please see the example code below for guidance:&#xA0;","<code> AnimationClip clip = new AnimationClip ();\n //If using Unity 5\n clip.legacy = true;\n \n         \n // Rotation\n AnimationCurve CurveRot = new AnimationCurve ();\n AnimationCurve CurveRotY = new AnimationCurve ();\n AnimationCurve CurveRotZ = new AnimationCurve ();\n AnimationCurve CurveRotW = new AnimationCurve ();\n         \n \n float time = 0.5f;\n //stepValues [0,1,0,10]\n Quaternion angle = Quaternion.Euler (0, 0, stepValues[i] * 180.0f);\n CurveRot.AddKey (time, angle.x);\n CurveRotY.AddKey (time, angle.y);\n CurveRotZ.AddKey (time, angle.z);\n CurveRotW.AddKey (time, angle.w);    \n \n         \n clip.SetCurve (&quot;&quot;, typeof(Transform),&quot;localRotation.z&quot;, CurveRot);\n clip.SetCurve (&quot;&quot;,typeof(Transform),&quot;localRotation.y&quot;, CurveRotY);\n clip.SetCurve (&quot;&quot;,typeof(Transform),&quot;localRotation.z&quot;, CurveRotZ);\n clip.SetCurve (&quot;&quot;,typeof(Transform),&quot;localRotation.w&quot;, CurveRotW);\n \n //This ensures a smooth interpolation\n clip.EnsureQuaternionContinuity ();\n         \n String newCName = &quot;Comp1_L_1&quot;;\n AssetDatabase.CreateAsset (clip,ANIM_CLIP_PATH+newCName+&quot;.anim&quot;);\n AssetDatabase.SaveAssets ();</code>"]},{"title":"More Information","content":["<a href=\"http://docs.unity3d.com/Manual/animeditor-AnimationCurves.html\">http://docs.unity3d.com/Manual/animeditor-AnimationCurves.html</a>&#xA0;","This article applies to Unity versions 5.x","&#xA0;"]}]}]