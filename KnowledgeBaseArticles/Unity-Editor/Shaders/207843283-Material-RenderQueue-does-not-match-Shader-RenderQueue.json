[{"title":"Material RenderQueue does not match Shader RenderQueue","authorName":"Nikos Chagialas.","createdDate":"2016-01-29T15:34:25Z","updatedDate":"2017-03-17T02:40:47Z","labels":["Shaders","Shader","Materials","Material","RenderQueue","Depth","Order"],"sections":[{"title":"Symptoms","content":["\n<li>Objects may appear in unexpected depths</li>\n<li>Order in Layer is ignored i.e. in Sprite Renderer</li>\n"]},{"title":"Causes","content":["This might have occurred for a couple of reasons:","\n<li>By using an Editor or Runtime script that intentionally overrides the <a href=\"http://docs.unity3d.com/ScriptReference/Material-renderQueue.html\">Material.renderQueue</a> of the material. This material could then be duplicated or reused in another project expecting that the RenderQueue is inherited by the Shader&apos;s RenderQueue. For example:<br>\n<pre><span class=\"wysiwyg-color-black wysiwyg-font-size-medium\">gameObject.GetComponent&lt;Renderer&gt;().sharedMaterial.renderQueue = 2000;</span></pre>\n</li>\n<li>By using an older version of Unity (prior to 5.1.3, see More Information below), which did not reset the Material RenderQueue when a new Shader was assigned to the material.</li>\n"]},{"title":"Resolution","content":["Reset Material RenderQueue to the Shader RenderQueue.<br><br>The following Editor script goes through all the Materials in the project and sets the Material RenderQueue to the Shader RenderQueue:<br><br>","\n<pre><span>using</span> <span>UnityEditor</span>;\n<span>using</span> <span>UnityEngine</span>;\n\n<span>public</span> <span>class</span> <span>ResetMaterialsRenderQueue</span>\n{\n\t[MenuItem (&quot;Assets/Reset Materials RenderQueue&quot;)]\n\t<span>static</span> <span>void</span> DoResetMaterialsRenderQueue()\n\t{\n        Material[] materials = (Material[])Resources.FindObjectsOfTypeAll(<span>typeof</span>(Material));\n\n\t    <span>int</span> materialsLength = materials.Length;\n\n\t    <span>for</span> (<span>int</span> i = 0; i &lt; materialsLength; ++i)\n\t    {\n\t        <span>if</span> (materials[i].shader != <span>null</span>)\n\t        {\n\t            materials[i].renderQueue = materials[i].shader.renderQueue;\n\t        }\n\t    }  \n\t}\n}\n</pre>\n"]},{"title":"Further Instructions","content":["\n<li>Download the file below</li>\n<li>Unzip into Assets/Editor folder</li>\n<li>In Unity Editor, go to Assets&#xA0;and select&#xA0;Reset&#xA0;Materials RenderQueue<br><br></li>\n"]}]}]