[{"title":"How do I make a scene dirty when modifying a property via script?","authorName":"Florent Guinier.","createdDate":"2017-05-08T14:40:08Z","updatedDate":"2017-05-09T13:31:00Z","labels":["Scene","Scripting","API","Script","dirty scene","Dirty","Undo","EditorSceneManager"],"sections":[{"title":"Symptoms","content":["\n<li><span>I modify a property via the scripting API. </span></li>\n<li><span>The scene is not made dirty.</span></li>\n"]},{"title":"Cause","content":["<span>Scripting APIs do not use the undo mechanism nor mark the scene dirty by default. One can, however, enforce these behaviours.</span>"]},{"title":"Resolution","content":["There are two different options for solving this:","<em><strong>Option 1:</strong></em>","If you have access to the object itself you can use the <strong><a href=\"https://docs.unity3d.com/ScriptReference/Undo.html\">Undo.RecordObject</a></strong> method before setting the property from the script.","\n<tbody>\n<tr>\n<td><strong>Undo.RecordObject (myGameObject.transform, &quot;Zero Transform Position&quot;);</strong>\n<p><strong>myGameObject.transform.position = Vector3.zero;</strong></p>\n</td>\n</tr>\n</tbody>\n","An example showing using how the scene is marked dirty with Undo.RecordObject is attached to <a href=\"/hc/article_attachments/115007423746/dirtyScene%20Article.zip\"><strong>this article.</strong></a>","<strong><img src=\"/hc/article_attachments/115007423926/UndoRecordObject.png\" alt=\"UndoRecordObject.png\"></strong>","<em><strong>Option 2:</strong></em>","One can also mark the scene as dirty manually using:","\n<tbody>\n<tr>\n<td>\n<p><strong>EditorSceneManager.MarkSceneDirty</strong></p>\n</td>\n</tr>\n</tbody>\n","after setting a property from script.","\n<tbody>\n<tr>\n<td>\n<p><strong>LightmapEditorSettings.bakeResolution = 14;</strong></p>\n<p><strong>EditorSceneManager.MarkSceneDirty(EditorSceneManager.GetActiveScene());</strong></p>\n</td>\n</tr>\n</tbody>\n"]},{"title":"More information","content":["<strong><a href=\"https://docs.unity3d.com/ScriptReference/Undo.html\">Undo</a></strong>","<strong><a href=\"https://docs.unity3d.com/ScriptReference/SceneManagement.EditorSceneManager.html\">EditorSceneManager</a></strong>","<span>&#xA0;</span>","<br><br><br>"]}]}]