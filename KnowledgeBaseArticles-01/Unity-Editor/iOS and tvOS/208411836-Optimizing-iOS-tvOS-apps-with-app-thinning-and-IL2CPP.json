[{"title":"Optimizing iOS & tvOS apps with app thinning and IL2CPP","authorName":"David Berger.","createdDate":"2016-04-08T10:53:10Z","updatedDate":"2017-03-14T03:13:59Z","labels":["AssetBundles","Xcode","iOS","app  thinning","resource slicing","optimizing","app size","odr","on-demand resources","tvOS","bitcode","IL2CPP","build size","应用瘦身","优化","构建尺寸","资源分片"],"sections":[{"title":"Symptoms","content":["\n<li>App size is bigger&#xA0;than the over-the-air download limit and&#xA0;forces iOS users to download the app via WiFi.</li>\n<li>I want to use resource slicing and bitcode on iOS and tvOS.</li>\n<li>I use AssetBundles, but I would like to support&#xA0;on-demand resources on iOS and tvOS.</li>\n<li>The universal binary of the app or single slices are bigger than allowed from the Apple submission guidelines.</li>\n"]},{"title":"Cause","content":["My app is bigger than the over-the-air download limit on iOS and bigger than the main application bundle size on tvOS.&#xA0;","I want to get the best download size, storage utilisation and runtime performance for my iOS and tvOS app.","The <a href=\"http://www.unix.com/man-page/osx/1/otool/\">otool</a> report shows that single binary slices (32bit, 64bit) or the universal binary are bigger than the allowed limits from the Apple submission guidelines."]},{"title":"Resolution","content":["<a href=\"https://developer.apple.com/library/tvos/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html#//apple_ref/doc/uid/TP40012582-CH35-SW1\">App slicing</a> is very useful on iOS and tvOS platforms, as&#xA0;it helps the developers to pack more assets into the initial app bundle and still stay within the over-the-air download limit on iOS and main application bundle size on tvOS. There are two flavors of app slicing: app executable slicing and app resource slicing.","\n<li>Read more about app executable slicing in <a href=\"/hc/en-us/articles/209933103\">Bitcode Support in iOS &amp; tvOS</a></li>\n<li>Read more about resource slicing in <a href=\"/hc/en-us/articles/208412046\">Optimizing iOS &amp; tvOS app size with resource slicing</a></li>\n","You can use <a href=\"https://developer.apple.com/library/prerelease/ios/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/\" target=\"_blank\">on-demand resources</a> to both reduce initial application download sizes and reduce the device storage usage by removing no longer needed assets.","\n<li>Read more about on-demand resources in <a href=\"/hc/en-us/articles/209933113\">Mastering on-demand resources for iOS &amp; tvOS</a>&#xA0;</li>\n","<a href=\"http://blogs.unity3d.com/2015/05/06/an-introduction-to-ilcpp-internals/\">IL2CPP</a> converts ahead-of-time (AOT) C# code into C++ code which will be compiled into the final binary of your app using&#xA0;XCode and LLVM. This can lead to bigger universal binaries or app slices (32bit,64bit). You code can be optimised.","\n<li>Read more about IL2CPP build size&#xA0;optimization in <a href=\"/hc/en-us/articles/208412186\">IL2CPP build size optimizations</a>&#xA0;</li>\n"]},{"title":"More Information","content":["\n<ul>\n<li>Read more about app executable slicing in <a href=\"/hc/en-us/articles/209933103\">Bitcode Support in iOS &amp; tvOS</a></li>\n<li>Read more about resource slicing in <a href=\"/hc/en-us/articles/208412046\">Optimizing iOS &amp; tvOS app size with resource slicing</a></li>\n<li>Read more about on-demand resources in <a href=\"/hc/en-us/articles/209933113\">Mastering on-demand resources for iOS &amp; tvOS</a></li>\n<li>Read more about IL2CPP build size&#xA0;optimization in <a href=\"/hc/en-us/articles/208412186\">IL2CPP build size optimizations</a>&#xA0;</li>\n</ul>\n","This article applies to Unity versions 5.2.0p1 and higher, XCode 7 and higher, iOS 9.0 and higher"]},{"title":"More Information","content":["\n<li>Read more about app executable slicing in <a href=\"/hc/en-us/articles/209933103\">Bitcode Support in iOS &amp; tvOS</a></li>\n<li>Read more about resource slicing in <a href=\"/hc/en-us/articles/208412046\">Optimizing iOS &amp; tvOS app size with resource slicing</a></li>\n<li>Read more about on-demand resources in <a href=\"/hc/en-us/articles/209933113\">Mastering on-demand resources for iOS &amp; tvOS</a></li>\n<li>Read more about IL2CPP build size&#xA0;optimization in <a href=\"/hc/en-us/articles/208412186\">IL2CPP build size optimizations</a>&#xA0;</li>\n"]}]}]